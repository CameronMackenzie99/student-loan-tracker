import { type NextPage } from "next";
import Head from "next/head";

import { useState } from "react";
import type { FormType } from "../components/LoanForm";
import { LoanForm } from "../components/LoanForm";
import { LoanProjection } from "../components/LoanProjection";

const Home: NextPage = () => {
  const [formData, setFormData] = useState<FormType>();

  const onFormDataChange = (data: FormType) => {
    setFormData(data);
  };

  return (
    <>
      <Head>
        <title>Student Loan Tracker</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="max-w-screen flex min-h-screen flex-col items-center bg-slate-100 dark:bg-gradient-to-b dark:from-[#163056] dark:to-[#15162c]">
        <div className="container flex flex-col items-center justify-center gap-12 px-4 py-16 sm:px-4">
          <h1 className="text-center text-5xl font-extrabold tracking-tight text-black dark:text-white sm:text-[5rem]">
            Student <span className="dark:text-[hsl(216,92%,76%)]">Loan</span>{" "}
            Tracker
          </h1>
          <article className="">
            <p className="mx-auto w-2/3 text-xl dark:text-white">
              Student loans are a necessity for most when going to uni. Often
              times, you will hear the mantra - &quot;Student loans are
              effectively a graduate tax! Most will never pay them off in
              full&quot; And while to a certain extent this is true, with the
              new Plan 5 loans, many will still be making payments into their
              retirement, particularly those who attend as mature students. It
              is often hard to weigh up this financial decision, and once
              graduated, the impact that any overpayments will have on your loan
              overall. This tool is designed to demystify what your loan may
              look like in decades time, and how differing income levels at
              various points in your life can massively change how much you
              repay, if any. It currently only works for Plan 2 loans (undergrad
              degrees post 2012) but will soon be expanded to cover all plans.
            </p>
          </article>
          <div className="w-full flex-row gap-4 sm:w-full md:gap-8">
            <LoanForm onFormDataChange={onFormDataChange} />
            {formData && (
              <LoanProjection
                loanBalance={formData?.loanBalance}
                graduatingYear={formData?.graduatingYear}
              />
            )}
          </div>
        </div>
      </main>
    </>
  );
};

export default Home;
